@using WebUI.Helpers
@model WebUI.ViewModels.HomeViewModel
@{
    ViewBag.Title = "Home";
}


<div id="results">
    <div class="container-fluid text-center">
        @section Search
        {@using (Ajax.BeginForm("Home", new {page = 1}, new AjaxOptions {UpdateTargetId = "results"}))
         {
             <div class="col-sm-3 col-md-3" style="margin-top: 7px">
                 <div class="input-group">
                     <input type="text" class="form-control" name="searchItem" placeholder="Search...">
                     <div class="input-group-btn">
                         <button class="btn btn-default" type="submit" value="Search">
                             <i class="glyphicon glyphicon-search"></i>
                         </button>
                     </div>
                 </div>
             </div>
         }}
        <div class="row content"><h1 class="text-default text-center">Knowledge Control System</h1></div>
        <div class="row content">
            <div class="col-sm-8 text-left">
                <h3>List of tests</h3>
                <div class="container">
                    <div class="list-group">
                        @foreach (var item in Model.Tests)
                        {
                            if (item.IsValid)
                            {
                                <div class="list-group-item">

                                    <div class="container">
                                        <div class="row">
                                            <div class="col-sm text-success">Test name: @item.Name</div>
                                            <div class="col-sm">The creator the test: @item.Creator</div>
                                            <div class="col-sm">The count of questions the test: @item.Questions.Count</div>
                                            <div class="col-sm">The time for passing the test: @item.Time</div>
                                            <div class="col-sm">Discription</div>
                                            <div class="col-sm">
                                                @Html.ActionLink("Start test", "Passing", new {id = item.Id}, new {@class = "btn btn-success"})
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>

                <div class="text-center">
                    @if (Model.PageInfo.TotalPages <= 4)
                    {
                        @Html.FewPageLinks(Model.PageInfo, (x, y) => Url.Action("Home", new {page = x, searchItem = y}))
                    }
                    else
                    {
                        @Html.PageTopLink(Model.PageInfo, (x, y) => Url.Action("Home", new {page = x, searchItem = y}))

                        @Html.PageLinks(Model.PageInfo, (x, y) => Url.Action("Home", new {page = x, searchItem = y}))

                        @Html.PageEndLink(Model.PageInfo, (x, y) => Url.Action("Home", new {page = x, searchItem = y}))
                    }

                </div>
            </div>
            <div class="col-sm-4">
                <h3 class="text-success">Welcome to KCS!</h3>
                <h4 class="text-muted text-center">On our site you can find interesting and pass any test you! And also - to create your own test! When you create a watch out, because all tests are mandatory upgrades. Try it, it's so easy! Just a couple of clicks!</h4>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/scripts/jquery-1.10.2.min.js")
    @Scripts.Render("~/scripts/jquery.unobtrusive-ajax.min.js")
}